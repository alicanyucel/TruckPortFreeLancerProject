<div class="live-map-container">
  <div class="map-header">
    <h1>🗺️ {{ translate('liveMap.title') }}</h1>
    <p>{{ translate('liveMap.subtitle') }}</p>
  </div>

  <div class="map-content">
    <div class="map-section">
      <div class="map-container">
        <div class="map-placeholder">
          <div class="map-background">
            <!-- Simulated map background -->
            <div class="map-grid"></div>
            
            <!-- Vehicle markers on map -->
            <div *ngFor="let vehicle of vehicles" 
                 class="vehicle-marker"
                 [style.left.%]="((vehicle.lng - 26) / 8) * 100"
                 [style.top.%]="(1 - (vehicle.lat - 36) / 6) * 100"
                 [style.background-color]="getStatusColor(vehicle.status)"
                 (click)="selectVehicle(vehicle)"
                 [class.selected]="selectedVehicle?.id === vehicle.id">
              <span class="marker-label">{{vehicle.id}}</span>
              <div class="pulse-ring" *ngIf="vehicle.status === 'active'"></div>
            </div>
          </div>
          
          <div class="map-legend">
            <h4>{{ translate('liveMap.statusIndicators') }}</h4>
            <div class="legend-item">
              <span class="legend-color" style="background-color: #27ae60;"></span>
              <strong><span>{{ translate('liveMap.status.active') }}</span></strong>
            </div>
            <div class="legend-item">
              <span class="legend-color" style="background-color: #f39c12;"></span>
              <strong><span>{{ translate('liveMap.status.idle') }}</span></strong>
            </div>
            <div class="legend-item">
              <span class="legend-color" style="background-color: #e74c3c;"></span>
              <strong><span>{{ translate('liveMap.status.maintenance') }}</span></strong>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="vehicle-list-section">
    <h3>{{ translate('liveMap.vehicleList') }}</h3>
      <div class="vehicle-list">
        <div *ngFor="let vehicle of vehicles" 
             class="vehicle-card"
             [class.selected]="selectedVehicle?.id === vehicle.id"
             (click)="selectVehicle(vehicle)">
          <div class="vehicle-header">
            <div class="vehicle-id">{{vehicle.id}}</div>
            <div class="vehicle-status" 
                 [style.background-color]="getStatusColor(vehicle.status)">
              {{getStatusText(vehicle.status)}}
            </div>
          </div>
          
          <div class="vehicle-info">
            <div class="info-row">
              <strong>{{vehicle.name}}</strong>
            </div>
            <div class="info-row">
              👤 {{getDriverName(vehicle.driverKey)}}
            </div>
            <div class="info-row">
              📍 {{getDestination(vehicle.destinationKey)}}
            </div>
            <div class="info-row">
              📦 {{getCargo(vehicle.cargoKey)}}
            </div>
            <div class="info-row" *ngIf="vehicle.status === 'active'">
              🚀 {{ fmtNumber(vehicle.speed, 0) }} km/h
            </div>
            <div class="info-row timestamp">
              🕒 {{ fmtDate(vehicle.lastUpdate, 'HH:mm:ss') }}
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Selected Vehicle Details -->
  <div class="vehicle-details" *ngIf="selectedVehicle">
  <h3>{{ translate('liveMap.vehicleDetails') }}</h3>
    <div class="details-grid">
      <div class="detail-card">
    <h4>{{ translate('liveMap.details.vehicleInfo') }}</h4>
        <p><strong>ID:</strong> {{selectedVehicle.id}}</p>
    <p><strong>{{ translate('liveMap.details.model') }}:</strong> {{selectedVehicle.name}}</p>
    <p><strong>{{ translate('liveMap.details.driver') }}:</strong> {{getDriverName(selectedVehicle.driverKey)}}</p>
    <p><strong>{{ translate('liveMap.details.status') }}:</strong> 
          <span [style.color]="getStatusColor(selectedVehicle.status)">
            {{getStatusText(selectedVehicle.status)}}
          </span>
        </p>
      </div>
      
      <div class="detail-card">
  <h4>{{ translate('liveMap.details.locationInfo') }}</h4>
  <p><strong>{{ translate('liveMap.details.latitude') }}:</strong> {{ fmtNumber(selectedVehicle.lat, 4) }}</p>
  <p><strong>{{ translate('liveMap.details.longitude') }}:</strong> {{ fmtNumber(selectedVehicle.lng, 4) }}</p>
  <p><strong>{{ translate('liveMap.details.speed') }}:</strong> {{ fmtNumber(selectedVehicle.speed, 0) }} km/h</p>
  <p><strong>{{ translate('liveMap.details.lastUpdate') }}:</strong> {{ fmtDate(selectedVehicle.lastUpdate, 'dd/MM/yyyy HH:mm:ss') }}</p>
      </div>
      
      <div class="detail-card">
  <h4>{{ translate('liveMap.details.cargoInfo') }}</h4>
  <p><strong>{{ translate('liveMap.details.destination') }}:</strong> {{getDestination(selectedVehicle.destinationKey)}}</p>
  <p><strong>{{ translate('liveMap.details.cargo') }}:</strong> {{getCargo(selectedVehicle.cargoKey)}}</p>
      </div>
    </div>
  </div>

  <!-- Reklam Alanı -->
  <div class="advertisements-section">
    <div class="advertisements-placeholder">Reklam alanı (placeholder)</div>
  </div>
</div>
